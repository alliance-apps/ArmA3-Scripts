<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>ID script tutorial (English)</title>

		<!-- Bootstrap core CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

		<!-- Custom styles for this template -->
		<link href="https://getbootstrap.com/docs/4.0/examples/grid/grid.css" rel="stylesheet">

		<!-- JS -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	</head>

	<body>
	<p style="display: inline; position: absolute; right: 5px; top: 5px;">Stand: 30.06.2018</p>

		<div class="container">
				<table style="width:100%">
					<tr>
						<th><h1>Tutorial: ID script</h1></th>
						<th><a href="https://www.allianceapps.de"><img src="https://allianceapps.de/images/linksoben.png" height="75" align="right"></a></th>
					</tr>
				</table>
			<h3>Warning</h3>
			<p>In this tutorial we will change files in your clientside mission, in your @life_server - so please make backups before starting. Seriously, do it. AllianceApps is not responsible for any data loss.</p>
			<div class="alert alert-danger" role="alert">
				The next steps need to be executed in the <b>clientside mission</b> (.Altis, .Tanoa, .Malden):<br>
			</div>
			<h3>Step 1</h3>
			Create a file named <code>allianceapps_license.txt</code> in your <code>/core/</code> folder in your mission (.Altis, .Tanoa usw.) or open it up, if it already exists. Add the following line to this file:
			<br>
			<code>AUSWEIS: LICENSEKEY HERE</code><br>
			Replace the licensekey with your personal key.

			<h3>Step 2</h3>
			<p>So let's get started. Did you back everything up? Are you sure? Ok, let's go.</p>


			<h3>Step 3</h3>
			<p>Copy the folder <code>idcard</code> into <code>/core/</code>.</p>
			<p>
			Open <code>/Functions.hpp</code> or <code>/Functions.h</code> and add the following in front of the last <code>}</code> (after <code>class Vehicle {</code>):<br>
			<pre class="prettyprint">class allianceapps_idcard {
	file = "core\idcard";
	class idcard_NameCheck {};
	class idcard {};
	class idcard_Created {};
	class show_idcard {};
};</pre></p>
			<h3>Step 4</h3>
			<p>Open the file <code>/dialog/masterhandler.hpp</code> and add the following at the end of the file:</p>
			<pre class="prettyprint">#include "..\core\idcard\idcard.hpp" //idcard</pre>

			<h3>Step 5</h3>
			<p>Open the file <code>/CfgRemoteExec.hpp</code> and add the following under <code>/* Functions for everyone */</code>:</p>
			<pre class="prettyprint">F(life_fnc_idcard_Created,CLIENT) //idcard
F(ton_fnc_updateidcard,SERVER) //idcard
F(life_fnc_show_idcard,CLIENT) //idcard</pre>

			<h3>Step 6</h3>
			<p>Open the file <code>/core/configuration.sqf</code> and add the following at the end of the file:</p>
			<pre class="prettyprint">life_idcard_data = [];
life_side_noidcard = false;</pre>

			<h3>Step 7</h3>
			<p>Open the file <code>/description.ext</code> and add the following to the class <code>RscTitles</code>:</p>
			<pre class="prettyprint">#include "core\idcard\idcard_show.hpp"</pre>

			<hr>
			<h3>Hint</h3>
			<p>By default, <b>Cops</b> and <b>Medics</b> will be forced to create an ID when they first join. <b>Civilians</b> can request one at an infostand later.
			Choose "Force Civilian ID creation" in <b>Step 8</b> to force them to also create their ID when they first join.</p>
			<hr>

			<h3>Step 8</h3>
			<p>Open the file <code>/core/initCiv.sqf</code> and add the following after <code>waitUntil {!(isNull (findDisplay 46))};</code>:</p>

			<div id="civforcepanel" data-children=".itemciv">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-parent="#civforcepanel" href="#civnormal" aria-expanded="false" aria-controls="civnormal">Default</button>
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-parent="#civforcepanel" href="#civforce" aria-expanded="false" aria-controls="civforce">Force Civilian ID creation</button>
				<div class="itemciv">
					<div class="collapse" id="civnormal" data-parent="#accordion" role="tabpanel">
<pre class="prettyprint">_12 = 0 call life_fnc_idcard_NameCheck;
waitUntil {_12};</pre>
					</div>
				</div>
				<div class="itemciv">
					<div class="collapse" id="civforce" data-parent="#accordion" role="tabpanel">
					<pre class="prettyprint">if(life_side_noidcard) then {
	createDialog "aapps_idcard";
	//Abort can't be closeDialog in loadingscreen -> endmission
	((findDisplay 4689200) displayCtrl 4689213) ctrlSetEventHandler
	[
		"ButtonDown",
		"
			endmission ""END1"";
		"
	];
	(findDisplay 4689200) displaySetEventHandler ["keyDown","_this call life_fnc_displayHandler"];
	waitUntil{!(life_idcard_data isEqualTo [])};
};
_12 = 0 call life_fnc_idcard_NameCheck;
waitUntil {_12};</pre>
					</div>
				</div>
			</div>
			<h3>Step 9</h3>
			<p>Open the files <code>/core/initCop.sqf</code> and <code>/core/initMedic.sqf</code>. In both files, find <code>[] call life_fnc_spawnMenu;</code> and add the following BEFORE that:</p>
			<pre class="prettyprint">if(life_side_noidcard) then {
	createDialog "aapps_idcard";
	//Abort can't be closeDialog in loadingscreen -> endmission
	((findDisplay 4689200) displayCtrl 4689213) ctrlSetEventHandler
	[
		"ButtonDown",
		"
			endmission ""END1"";
		"
	];
	(findDisplay 4689200) displaySetEventHandler ["keyDown","_this call life_fnc_displayHandler"];
	waitUntil{!(life_idcard_data isEqualTo [])};
};
_12 = 0 call life_fnc_idcard_NameCheck;
waitUntil {_12};</pre>

			<h3>Step 10</h3>
			<p>Open the file <code>/core/functions/fn_keyHandler.sqf</code> and manually search for <code>//Space key for Jumping</code>. Add the following <b>two cases</b> above this line:</P>
			<pre class="prettyprint">case 68: {
	if(!(life_idcard_data isEqualto [])) then {
		if(!isnull cursorTarget) then {
			if(alive cursorTarget) then {
				if(cursorTarget isKindOf "Man") then {
					[life_idcard_data,getplayeruid player] remoteExecCall ["life_fnc_show_idcard",cursorTarget];
					hint format[localize "STR_capps_cur_error_success",name cursorTarget];
				} else {
					[life_idcard_data,getplayeruid player] spawn life_fnc_show_idcard;
					hint localize "STR_capps_cur_error_no_target";
				};
			} else {
				[life_idcard_data,getplayeruid player] spawn life_fnc_show_idcard;
				hint localize "STR_capps_cur_error_not_alive";
			};
		} else {
			[life_idcard_data,getplayeruid player] spawn life_fnc_show_idcard;
			hint localize "STR_capps_cur_error_no_target";
		};
	} else {
		hint localize "STR_capps_cur_error_no_idcard";
	};
};
case 87: {
	if(!(playerSide isEqualto CIVILIAN)) then {
		if(!(life_idcard_data isEqualto [])) then {
			if(!isnull cursorTarget) then {
				if(alive cursorTarget) then {
					if(cursorTarget isKindOf "Man") then {
						[life_idcard_data,getplayeruid player,playerSide,(call life_coplevel) + (call life_mediclevel)] remoteExecCall ["life_fnc_show_idcard",cursorTarget];
						hint format[localize "STR_capps_cur_error_success_card",name cursorTarget];
					} else {
						[life_idcard_data,getplayeruid player,playerSide,(call life_coplevel) + (call life_mediclevel)] spawn life_fnc_show_idcard;
						hint localize "STR_capps_cur_error_no_target";
					};
				} else {
					[life_idcard_data,getplayeruid player,playerSide,(call life_coplevel) + (call life_mediclevel)] spawn life_fnc_show_idcard;
					hint localize "STR_capps_cur_error_not_alive";
				};
			} else {
				[life_idcard_data,getplayeruid player,playerSide,(call life_coplevel) + (call life_mediclevel)] spawn life_fnc_show_idcard;
				hint localize "STR_capps_cur_error_no_target";
			};
		} else {
			hint localize "STR_capps_cur_error_no_idcard";
		};
	};
};</pre>
			<p>The numbers <b>68</b> and <b>87</b> are the keys people use to show others their <b>ID</b> or <b>badge</b>.<br>
			By default we're using <b>F10 (68)</b> and <b>F11 (87)</b>. You can check out the Bohemia Wiki to find out all the keys: <br>
			<a href="https://community.bistudio.com/wiki/DIK_KeyCodes#German_keyboard">BI Arma 3 DIK_KeyCodes (German Keyboard)</a></p>

			<h3>Step 11</h3>
			<p>Open the file <code>/stringtable.xml</code> and go to the end of the file. Before the last <code>&lt;/Project&gt;</code> - Tag, add the content of the <b>Stringtable.xml</b> that was delivered with this script.</P>
			<div class="alert alert-danger" role="alert">
				The next steps need to be executed in the <b>@life_server</b>:<br>
			</div>
			<h3>Step 12</h3>
			<p>Open the file <code>/Config.cpp</code>, search for <code>class keyManagement {};</code> and add the following after it:<br>
				<pre class="prettyprint">class updateIdCard {}; //IdCard</pre><br>
				Now copy the file <code>fn_updateIdCard.sqf</code> from the files we delivered to the following folder: <code>/Functions/Systems</code>.<br><br>
				<b>Additional step if you're using an older version of Altis Life:</b><br/>
				<br>
				<p>
					<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#idcardupdatecollapse" aria-expanded="false" aria-controls="idcardupdatecollapse">Additional Step</button>
				</p>
				<div class="collapse" id="idcardupdatecollapse">
					<div class="card">
						<div class="card-body">
							Open the file <code>/Functions/Systems/fn_updateIdCard.sqf</code> and search for <code>pid</code>.<br>
							Replace <b>all occurences</b> of <code>pid</code> with <code>playerid</code>.
						</div>
					</div>
				</div>

			</p>
			<h3>Step 13</h3>
			<p>Open the file <code>/Functions/MySQL/fn_queryRequest.sqf</code>. If this file wasn't modified and is still the default one from <b>Altis Life 5.0</b> and <b>nothing</b> was changed, replace
<pre class="prettyprint">_query = switch (_side) do {
	// West - 11 entries returned
	case west: {format ["SELECT pid, name, cash, bankacc, adminlevel, donorlevel, cop_licenses, coplevel, cop_gear, blacklist, cop_stats, playtime FROM players WHERE pid='%1'",_uid];};
	// Civilian - 12 entries returned
	case civilian: {format ["SELECT pid, name, cash, bankacc, adminlevel, donorlevel, civ_licenses, arrested, civ_gear, civ_stats, civ_alive, civ_position, playtime FROM players WHERE pid='%1'",_uid];};
	// Independent - 10 entries returned
	case independent: {format ["SELECT pid, name, cash, bankacc, adminlevel, donorlevel, med_licenses, mediclevel, med_gear, med_stats, playtime FROM players WHERE pid='%1'",_uid];};
};</pre>
with the following
<pre class="prettyprint">_query = switch (_side) do {
	// West - 12 entries returned
	case west: {format ["SELECT pid, name, cash, bankacc, adminlevel, donorlevel, cop_licenses, coplevel, cop_gear, blacklist, cop_stats, playtime, idcard_data_cop FROM players WHERE pid='%1'",_uid];};
	// Civilian - 13 entries returned
	case civilian: {format ["SELECT pid, name, cash, bankacc, adminlevel, donorlevel, civ_licenses, arrested, civ_gear, civ_stats, civ_alive, civ_position, playtime, idcard_data_civ FROM players WHERE pid='%1'",_uid];};
	// Independent - 11 entries returned
	case independent: {format ["SELECT pid, name, cash, bankacc, adminlevel, donorlevel, med_licenses, mediclevel, med_gear, med_stats, playtime, idcard_data_med FROM players WHERE pid='%1'",_uid];};
};</pre>
			<b>Additional step if you're using an older version of Altis Life:</b><br>
			<br>
			<p>
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#querycollapse" aria-expanded="false" aria-controls="querycollapse">Additional Step</button>
			</p>
			<div class="collapse" id="querycollapse">
				<div class="card">
					<div class="card-body">
						<ul>
							<li>If the column for the Steam64 ID in your players table is named <b>playerid</b> instead <b>pid</b>, you will have to replace <code>SELECT pid</code> with <code>SELECT playerid</code> in this code.</li>
							<li>Search for <code>_queryResult set[15,_keyArr];</code> and replace it with <code>_queryResult set[16,_keyArr];</code></li>
						</ul>
					</div>
				</div>
			</div>

			<p>
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#querycollapse2" aria-expanded="false" aria-controls="querycollapse">If your query file is not default Altis Life 5.0</button>
			</p>
			<div class="collapse" id="querycollapse2">
				<div class="card">
					<div class="card-body">
						If your queryRequest is <b>not</b> the default Altis Life one, do this:<br>
						<ul>
							<li>Take the following line <code>// West - XY entries returned</code> and <b>replace</b> XY with XY + 1. So if XY was 13, you should add 1 and write 14. Do the same for <code>// Civilian - 12 entries returned</code> und <code>// Independent - 10 entries returned</code>.</li>
							<li>Now you have to edit the <b>cases</b>:</li>
							<li>In the SQL query for <code>case west</code> add <code>, idcard_data_cop</code> before <code>FROM players</code>.</li>
							<li>In the SQL query for <code>case civilian</code> add <code>, idcard_data_civ</code> before <code>FROM players</code>.</li>
							<li>In the SQL query for <code>case independent</code> add <code>, idcard_data_med</code> before <code>FROM players</code>.</li>
						</ul>
						Remember the 3 numbers (<b>XY entries returned</b>), you'll need these in <b>Step 14</b> and <b>Step 15</b>.
						</p>
					</div>
				</div>
			</div>



			<br>

			<h3>Step 14</h3>
			<p>
				Search manually for <code>switch (_side) do {</code>.<br>
				If your file is default Altis Life 5.0, replace the complete switch case (which ends with<code>};</code>) with the following code and go to step 15:
				<p>
					<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#sessionreceived5" aria-expanded="false" aria-controls="sessionreceived5">Code</button>
				</p>
				<div class="collapse" id="sessionreceived5">
					<pre class="prettyprint">switch (_side) do {
	case west: {
		_queryResult set[9,([_queryResult select 9,1] call DB_fnc_bool)];

		//Parse Stats
		_new = [(_queryResult select 10)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_queryResult set[10,_new];

		//Playtime
		_new = [(_queryResult select 11)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_index = TON_fnc_playtime_values_request find [_uid, _new];
		if (_index != -1) then {
			TON_fnc_playtime_values_request set[_index,-1];
			TON_fnc_playtime_values_request = TON_fnc_playtime_values_request - [-1];
			TON_fnc_playtime_values_request pushBack [_uid, _new];
		} else {
			TON_fnc_playtime_values_request pushBack [_uid, _new];
		};
		[_uid,_new select 0] call TON_fnc_setPlayTime;
		
		//idcard_data
		_new = [(_queryResult select 12)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format["%1", _new];};
		_queryResult set[12,_new];
	};

	case civilian: {
		//idcard_data
		_new = [(_queryResult select 13)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format["%1", _new];};
		_queryResult set[13,_new];
		
		_queryResult set[7,([_queryResult select 7,1] call DB_fnc_bool)];

		//Parse Stats
		_new = [(_queryResult select 9)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_queryResult set[9,_new];

		//Position
		_queryResult set[10,([_queryResult select 10,1] call DB_fnc_bool)];
		_new = [(_queryResult select 11)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_queryResult set[11,_new];

		//Playtime
		_new = [(_queryResult select 12)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_index = TON_fnc_playtime_values_request find [_uid, _new];
		if (_index != -1) then {
			TON_fnc_playtime_values_request set[_index,-1];
			TON_fnc_playtime_values_request = TON_fnc_playtime_values_request - [-1];
			TON_fnc_playtime_values_request pushBack [_uid, _new];
		} else {
			TON_fnc_playtime_values_request pushBack [_uid, _new];
		};
		[_uid,_new select 2] call TON_fnc_setPlayTime;
		
		/* Make sure nothing else is added under here */
		_houseData = _uid spawn TON_fnc_fetchPlayerHouses;
		waitUntil {scriptDone _houseData};
		_queryResult pushBack (missionNamespace getVariable [format ["houses_%1",_uid],[]]);
		_gangData = _uid spawn TON_fnc_queryPlayerGang;
		waitUntil{scriptDone _gangData};
		_queryResult pushBack (missionNamespace getVariable [format ["gang_%1",_uid],[]]);
	};

	case independent: {
		//Parse Stats
		_new = [(_queryResult select 9)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_queryResult set[9,_new];

		//Playtime
		_new = [(_queryResult select 10)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format ["%1", _new];};
		_index = TON_fnc_playtime_values_request find [_uid, _new];
		if !(_index isEqualTo -1) then {
			TON_fnc_playtime_values_request set[_index,-1];
			TON_fnc_playtime_values_request = TON_fnc_playtime_values_request - [-1];
			TON_fnc_playtime_values_request pushBack [_uid, _new];
		} else {
			TON_fnc_playtime_values_request pushBack [_uid, _new];
		};
		[_uid,_new select 1] call TON_fnc_setPlayTime;
		
		//idcard_data
		_new = [(_queryResult select 11)] call DB_fnc_mresToArray;
		if (_new isEqualType "") then {_new = call compile format["%1", _new];};
		_queryResult set[11,_new];
	};
};</pre></div>
				If your files are not default Altis Life 5.0:
				<ul>
					<li>Go to <code>case west</code> and add the following before the end <code>};</code>:<br>
					<pre class="prettyprint">//idcard_data
_new = [(_queryResult select XY)] call DB_fnc_mresToArray;
if (_new isEqualType "") then {_new = call compile format["%1", _new];};
_queryResult set[XY,_new];</pre>
						Here you'll have to replace XY with the number <b>West</b> you remembered from Step 13 and <b>subtract</b> 1. So if XY was <b>13</b>, you'll have to enter <b>12</b> here.</li>
					<li>Repeat the same for <b>independent</b>.</li>
					<li>Go to <code>case civilian: {</code> and add the following before the end <code>};</code>:<br>
					<pre class="prettyprint">//idcard_data
_new = [(_queryResult select XY)] call DB_fnc_mresToArray;
if (_new isEqualType "") then {_new = call compile format["%1", _new];};
_queryResult set[XY,_new];</pre>
					Here you'll have to replace XY with the number <b>Civilian</b> you remembered from Step 13 and <b>subtract</b> 1. So if XY was <b>13</b>, you'll have to enter <b>12</b> here.</li>
				</ul>
			</p>
			<div class="alert alert-danger" role="alert">
				Switch back to your <b>Mission file</b> (e.g.: .Altis, .Tanoa, .Malden):<br>
			</div>
			<h3>Step 15</h3>
			<p>
				Open the file <code>/core/session/fn_requestReceived.sqf</code> and search for <code>switch</code>.<br>
				This is a switch case, which contains several <b>cases</b>. These <b>cases</b> start with <code>{</code> and end with <code>}</code>.<br>
				<br>
				If your <b>query</b> (in <b>@life_server</b>), was different from default Altis Life 5.0, you need to modify the following code snippets.<br>
				To do that just replace the index <b>Indexe</b> (the numbers). These are the <b>XY numbers</b> you remembered from <b>Step 13</b>.<br>
				<br>
				Add the following to <code>case west</code> right before the end:
				<pre class="prettyprint">//idcard
if((_this select 12) isEqualTo []) then {
	life_side_noidcard = true;
} else {
	life_idcard_data = _this select 12;
};</pre>
			Add the following to <code>case civilian</code> above <code>//Position</code>:<br>
			<br>
			<div id="trollclass" data-children=".item">
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-parent="#trollclass" href="#civiliannormal" aria-expanded="false" aria-controls="civiliannormal">Default</button>
				<button class="btn btn-primary" type="button" data-toggle="collapse" data-parent="#trollclass" href="#civilianforce" aria-expanded="false" aria-controls="civilianforce">Force Civilian ID creation</button>
				<div class="item">
					<div class="collapse" id="civiliannormal" data-parent="#accordion" role="tabpanel">
<pre class="prettyprint">//idcard
life_idcard_data = _this select 13;</pre>
					</div>
				</div>
				<div class="item">
					<div class="collapse" id="civilianforce" data-parent="#accordion" role="tabpanel">
					<pre class="prettyprint">//idcard
if((_this select 13) isEqualTo []) then {
	life_side_noidcard = true;
} else {
	life_idcard_data = _this select 13;
};</pre>
					</div>
				</div>
			</div>
			<br>
			Add the following to <code>case independent</code> right before the end
			<pre class="prettyprint">//idcard
if((_this select 11) isEqualTo []) then {
	life_side_noidcard = true;
} else {
	life_idcard_data = _this select 11;
};</pre>
			<b>Additional Step if you have an older version of Altis Life (<5.0):</b><br/>
				<br>
				<p>
					<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#requestrecieved" aria-expanded="false" aria-controls="requestrecieved">Additional Step</button>
				</p>
				<div class="collapse" id="requestrecieved">
					<div class="card">
						<div class="card-body">
							Search for <code>if (count (_this select 15) > 0) then {</code> and replace this line with <code>if (count (_this select 16) > 0) then {</code>.<br>
							Search for <code>life_houses = _this select 13;</code> and replace this line with <code>life_houses = _this select 14;</code>.<br>
							Search for <code>life_gangData = _this select 14;</code> and replace this line with <code>life_gangData = _this select 15;</code>.<br>
						</div>
					</div>
				</div>

			</p>

			<h3>Step 16 (Optional - Fake idcards)</h3>
			<p>
				Open the file <code>/core/pmenu/fn_useItem.sqf</code> and search for <code>case (_item isEqualTo "boltcutter"): {</code>. Add the following code above that line:
				<pre class="prettyprint">case (_item isEqualTo "fakeidcard"): {
	life_idcard_fake = true;
	createDialog "aapps_idcard";
};</pre>
Now open your <code>/config/Config_vItems.hpp</code> or <code>/Config_vitems.hpp</code> and search for <code>class pickaxe {</code>. Add the following code above that line: 
			<pre class="prettyprint">class fakeidcard {
	variable = "fakeidcard";
	displayName = "STR_Item_fakeidcard";
	weight = 5;
	buyPrice = 50000;
	sellPrice = 1000;
	illegal = true;
	edible = -1;
	icon = "a3\3den\data\cfg3den\history\pasteitems_ca.paa";
};</pre>
Choose a shop and add this item <code>fakeidcard</code> to that config entry (at the top of this file).</p>
			
			
			<div class="alert alert-danger" role="alert">
				The following needs to be done in your <b>database</b>:<br>
			</div>
			<h3>Step 17</h3>
			<p>
				Run the following query in your game database (mostly called altislife):
				<pre class="prettyprint">ALTER TABLE players ADD idcard_data_civ varchar(500) NOT NULL DEFAULT '"[]"';
ALTER TABLE players ADD idcard_data_cop varchar(500) NOT NULL DEFAULT '"[]"';
ALTER TABLE players ADD idcard_data_med varchar(500) NOT NULL DEFAULT '"[]"';</pre>
			If you have a legacy version of <b>our</b> ID script, you can update all existing records by not changing anything and running <b>/Updater/UpdateIDCardDB.exe</b>.
			</p>

			<h3>Step 18 (Optional)</h3>
			<p>
				If you want to allow your <b>fractions</b> to create ID cards if they want to or change existing ID cards using money, add the following init code to an <b>object</b> of your choosing.<br>
				<b>Init for creating ID cards:</b>
				<pre class="prettyprint">this addAction[localize "STR_capps_apply_idcard",{createDialog "aapps_idcard"},"",0,false,false,"",'playerSide isEqualTo CIVILIAN && (life_idcard_data isEqualTo [])'];</pre>
				<b>Init for changing existing ID cards:</b>
				<pre class="prettyprint">this addAction[localize "STR_capps_change_idcard",{createDialog "aapps_idcard"},"",0,false,false,"",'(!(life_idcard_data isEqualTo []))'];</pre>
				<br>
				<b>Hint:</b> Do not use <b>SimpleObject</b>, because that doesn't work.
			</p>
		<h3 align='center'><div class="alert alert-success" role="alert">Congratulations. You have installed our ID card script.</div></h3>

		<hr>
			<h3>Hint</h3>
			<p>The file <code>/core/idcard/idcard.hpp</code> is a configuration file where you can change prices and some other things.<br>
			<br>
			The <b>license</b> is stored in the file <code>LICENSE.txt</code>. It must not be removed from the product. The script can only be installed on <b>1 public gameserver</b> at a time (non-public testservers are allowed) - if you want to run the script on <b>several servers</b> you'll need <b>several licenses</b>.

		<hr>
		</div> <!-- /container -->

		<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
	</body>
</html>
